<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3c.org/1999/xhtml"> <head> <title>D-LINK</title> <meta http-equiv="X-UA-Compatible" content="IE=9"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta http-equiv="Content-Type" content="text/css"> <link rel=stylesheet type="text/css" href="/css/jquery.selectbox.css"/> <script type="text/javascript" charset="utf-8" src="/js/initialJQ.js"></script> <script type="text/javascript" charset="utf-8" src="/js/initialJS.js"></script> <script type="text/javascript" charset="utf-8" src="/js/initialCSS.js"></script> <script type="text/javascript" charset="utf-8" src="/js/initialValidate.js"></script> <script type="text/javascript" charset="utf-8" src="/js/WebsiteFilter.js"></script> <script type="text/javascript">var HNAP=new HNAP_XML();var _ReciprocalRebootNumber=80;var Limit_TotalFilterRules=24;var datalist;function Load_HTML(){$("#header").load("header.html")}function Initial(){initialMenu();initialDetectRouterConnection();datalist=new Datalist()}function GetXML(){HNAP.GetXMLAsync("GetWebFilterSettings",null,"GetValue",function(a){GetResult_1st(a)})}function GetResult_1st(a){if(a!=null){var c=a.Get("GetWebFilterSettingsResponse/WebFilterURLs/string#");for(var b=1;b<=c;b++){var f=a.Get("GetWebFilterSettingsResponse/WebFilterURLs/string:"+b);var d=new Data(decode_char_text(f));datalist.push(d)}var e=a.Get("GetWebFilterSettingsResponse/WebFilterMethod");switch(e){case"DENY":document.getElementById("filter_Website").options[0].selected=true;break;case"ALLOW":document.getElementById("filter_Website").options[1].selected=true;break}check_TotalRule(Limit_TotalFilterRules,datalist.length());$("#filter_Website").selectbox({width:450});CheckNetworkStatus();document.getElementById("main").style.display="inline";$("select").change(function(){save_button_changed()});$("input").keydown(function(){save_button_changed()});$("input").change(function(){save_button_changed()})}else{if(DebugMode==1){alert("[!!GetXML Error!!] Function: GetResult_1st")}}}function CheckConnectionStatus(){$.ajax({cache:false,url:"./js/CheckConnection",timeout:5000,type:"GET",success:function(a){SetXML()},error:function(){document.getElementById("DetectRouterConnection").style.display="inline"}})}function SetXML(){document.getElementById("CreatePopAlertMessage").style.display="inline";HNAP.GetXMLAsync("SetWebFilterSettings",null,"GetXML",function(a){SetResult_1st(a)})}function SetResult_1st(a){if(a!=null){var c=document.getElementById("filter_Website").value;switch(c){case"1":a.Set("SetWebFilterSettings/WebFilterMethod","DENY");break;case"2":a.Set("SetWebFilterSettings/WebFilterMethod","ALLOW");break}a.Set("SetWebFilterSettings/NumberOfEntry",datalist.length());for(var b=0;b<datalist.length();b++){a.Set("SetWebFilterSettings/WebFilterURLs/string:"+(b+1),encode_char_text(datalist.list[b].website))}HNAP.SetXMLAsync("SetWebFilterSettings",a,function(d){SetResult_2nd(d)})}else{if(DebugMode==1){alert("[!!SetXML Error!!] Function: SetResult_1st")}}}function SetResult_2nd(b){var a=b.Get("SetWebFilterSettingsResponse/SetWebFilterSettingsResult");if(a=="OK"){setTimeout("waitSettingFinished()",1000)}else{if(a=="ERROR"){if(DebugMode==1){alert("[!!SetXML Error!!] Function: SetResult_2nd")}window.location.reload()}else{if(a=="REBOOT"){HNAP.GetXMLAsync("Reboot",null,"GetXML",function(c){SetResult_3rd(c)})}}}}function SetResult_3rd(a){if(a!=null){HNAP.SetXMLAsync("Reboot",a,function(b){SetResult_4th(b)})}else{alert("An error occurred!")}}function SetResult_4th(b){var a=b.Get("RebootResponse/RebootResult");if(a=="OK"||a=="REBOOT"){document.getElementById("dialog_msg_black2").innerHTML=I18N("j","Rebooting");Start_reciprocal_Number_Reboot()}if(a=="ERROR"){if(DebugMode==1){alert("[!!SetXML Error!!] Function: SetResult_8th")}setTimeout("waitSettingFinished()",1000)}}function waitSettingFinished(){window.location.reload()}function Start_reciprocal_Number_Reboot(){if(_ReciprocalRebootNumber>=0){document.getElementById("reciprocal_Number").innerHTML=_ReciprocalRebootNumber+" "+I18N("j","Sec");_ReciprocalRebootNumber--;setTimeout("Start_reciprocal_Number_Reboot()",1000)}else{redirectPage(null)}}function addRowData(){var a=new Data(null);datalist.push(a)}function deleteData(a){datalist.deleteData(a);check_TotalRule(Limit_TotalFilterRules,datalist.length());save_button_changed()}function createButton(){addRowData();check_TotalRule(Limit_TotalFilterRules,datalist.length())}function CheckNetworkStatus(){var a=sessionStorage.getItem("networkStatus");if((a==1)&&(currentDevice.helpVer!="")){document.getElementById("Get_Help").style.display="inline"}else{document.getElementById("Get_Help").style.display="none"}}function save_button_changed(){document.getElementById("Save_Disable_btn").style.display="none";document.getElementById("Save_btn").style.display="block";changeFlag=true;checkFlag=true;changeTimeoutAction()}function check_TotalRule(a,c){var b=a-c;document.getElementById("RemainingRules").innerHTML=b;if(b==0){$("#createButton").attr("class","styled_button_dis").prop("disabled",true)}else{$("#createButton").attr("class","styled_button_s").prop("disabled",false)}}$(document).ready(function(){Load_HTML();Initial();setMenu("menu_Advanced");GetXML();startTimeout()});</script> </head> <body> <div id="wrapper"> <div id="header"></div> <div id="menu"></div> <div id="menu_edge"></div> <div id="content"> <div id="info"> <div id="FunctionName"><script>I18N("h","Website Filter");</script></div> <div id="wall"><img id="page_WebsiteFilter" src="image/page_websiteFilter.png" alt="" width="195" height="119"/></div> <div id="directions"> <script>I18N("h","The website filters feature allows rules to be set that restrict access to a specified web address (URL) or blocks specified keywords in the URL. You can use Website Filter to restrict access to potentially harmful and inappropriate websites.");</script> <label id="Get_Help" onClick="showOnlineHelp('Website Filter');" style="cursor:pointer;display:none;text-Decoration:underline"><script>I18N("h","Click here for help.");</script></label> </div> </div> <div id="funcBar"> <div id="pagePath"><script>I18N("h","Advanced");</script> >> <script>I18N("h","Website Filter");</script></div> <ul id="rightFunc"> <li style="display:block"><div id="Save_btn" onclick="CheckConnectionStatus();changeTimeoutAction();" style="cursor:pointer; display:none"><script>I18N("h","Save");</script></div></li> <li style="display:block"><div id="Save_Disable_btn"><script>I18N("h","Save");</script></div></li> </ul> </div> <div id="main" style="display:none"> <table class="myTable" cellspacing="0"> <tr> <td> <div class="styled-select"> <select name="filter_Website" id="filter_Website"> <option value="1">DENY clients access to ONLY these sites</option> <option value="2">ALLOW clients access to ONLY these sites</option> </select> </div> </td> </tr> </table> <table class="mainTable" border="0" cellspacing="0" id="tblWebsiteFilter"> <thead> <tr> <th style="width:800px"><script>I18N("h","Website URL/Domain");</script></th> <th><script>I18N("h","Delete");</script></th> </tr> </thead> <tbody></tbody> </table> <br/> <br/> <button type="button" name="createButton" id="createButton" class="styled_button_s" onclick="createButton();save_button_changed();"><script>I18N("h","Add Rule");</script></button> &nbsp;&nbsp;<script>I18N("h","Remaining");</script>:&nbsp;<label id="RemainingRules">15</label> <br/> </div> <div id="CreatePopAlertMessage" style="display:none"> <div id="AlertPopRect"> <div id="AlertPopBody"> <table class="myAlertPop_table_b" id="waitSettingFinish" border="0" cellspacing="0"> <tbody> <tr> <td> <center><div id="Loading_pop_image2"></div></center> </td> </tr> <tr> <td label id="reciprocal_Number"></label></td> </tr> <tr> <td id="dialog_msg_black2"><script>I18N("h","Your changes are being saved.");</script></td> </tr> </tbody> </table> </div> </div> </div> <div id="DetectRouterConnection" style="display:none"></div> <div id="footer"> <div id="copyright"><script>I18N("h","COPYRIGHT");</script></div> </div> </div> </body> </html>#